import{w as y,l as M,m as p,n as A}from"./singletons.88_YLMnZ.js";import{w as L,x as S,v as I}from"./scheduler.t4ki4vww.js";import{p as z}from"./parse.RrI1B0B4.js";const x={message:"Missing Toast Message",autohide:!0,timeout:5e3},E="toastStore";function P(){const t=S(E);if(!t)throw new Error("toastStore is not initialized. Please ensure that `initializeStores()` is invoked in the root layout file of this app!");return t}function U(){const t=N();return L(E,t)}function D(){const t=Math.random();return Number(t).toString(32)}function N(){const{subscribe:t,set:i,update:s}=y([]),u=r=>s(e=>{if(e.length>0){const o=e.findIndex(c=>c.id===r),n=e[o];n&&(n.callback&&n.callback({id:r,status:"closed"}),n.timeoutId&&clearTimeout(n.timeoutId),e.splice(o,1))}return e});function a(r){if(r.autohide===!0)return setTimeout(()=>{u(r.id)},r.timeout)}return{subscribe:t,close:u,trigger:r=>{const e=D();return s(o=>{r&&r.callback&&r.callback({id:e,status:"queued"}),r.hideDismiss&&(r.autohide=!0);const n={...x,...r,id:e};return n.timeoutId=a(n),o.push(n),o}),e},freeze:r=>s(e=>(e.length>0&&clearTimeout(e[r].timeoutId),e)),unfreeze:r=>s(e=>(e.length>0&&(e[r].timeoutId=a(e[r])),e)),clear:()=>i([])}}const h={};function w(t){return t==="local"?localStorage:sessionStorage}function b(t,i,s){const u=s?.serializer??JSON,a=s?.storage??"local";function r(e,o){w(a).setItem(e,u.stringify(o))}if(!h[t]){const e=y(i,c=>{const l=w(a).getItem(t);l&&c(u.parse(l));{const g=m=>{m.key===t&&c(m.newValue?u.parse(m.newValue):null)};return window.addEventListener("storage",g),()=>window.removeEventListener("storage",g)}}),{subscribe:o,set:n}=e;h[t]={set(c){r(t,c),n(c)},update(c){const l=c(I(e));r(t,l),n(l)},subscribe:o}}return h[t]}b("modeOsPrefers",!1);b("modeUserPrefers",void 0);b("modeCurrent",!1);const T="(prefers-reduced-motion: reduce)";function O(){return window.matchMedia(T).matches}const j=M(O(),t=>{{const i=u=>{t(u.matches)},s=window.matchMedia(T);return s.addEventListener("change",i),()=>{s.removeEventListener("change",i)}}}),J=p("goto"),_=p("invalidate_all"),Q=p("before_navigate"),V=p("after_navigate");function H(t){return A.apply_action(t)}function R(t){const i=JSON.parse(t);return i.data&&(i.data=z(i.data)),i}function v(t){return HTMLElement.prototype.cloneNode.call(t)}function q(t,i=()=>{}){const s=async({action:a,result:r,reset:e=!0,invalidateAll:o=!0})=>{r.type==="success"&&(e&&HTMLFormElement.prototype.reset.call(t),o&&await _()),(location.origin+location.pathname===a.origin+a.pathname||r.type==="redirect"||r.type==="error")&&H(r)};async function u(a){if((a.submitter?.hasAttribute("formmethod")?a.submitter.formMethod:v(t).method)!=="post")return;a.preventDefault();const e=new URL(a.submitter?.hasAttribute("formaction")?a.submitter.formAction:v(t).action),o=new FormData(t),n=a.submitter?.getAttribute("name");n&&o.append(n,a.submitter?.getAttribute("value")??"");const c=new AbortController;let l=!1;const m=await i({action:e,cancel:()=>l=!0,controller:c,formData:o,formElement:t,submitter:a.submitter})??s;if(l)return;let f;try{const d=await fetch(e,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:o,signal:c.signal});f=R(await d.text()),f.type==="error"&&(f.status=d.status)}catch(d){if(d?.name==="AbortError")return;f={type:"error",error:d}}m({action:e,formData:o,formElement:t,update:d=>s({action:e,result:f,reset:d?.reset,invalidateAll:d?.invalidateAll}),result:f})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",u),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",u)}}}export{J as a,Q as b,V as c,_ as d,q as e,H as f,P as g,U as i,j as p};
