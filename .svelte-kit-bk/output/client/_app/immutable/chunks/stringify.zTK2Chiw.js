import{U as S,N as m,P as _,a as d,b as k,H as w}from"./parse.RrI1B0B4.js";class O extends Error{constructor(o,c){super(o),this.name="DevalueError",this.path=c.join("")}}function E(t){return Object(t)!==t}const P=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function v(t){const o=Object.getPrototypeOf(t);return o===Object.prototype||o===null||Object.getOwnPropertyNames(o).sort().join("\0")===P}function x(t){return Object.prototype.toString.call(t).slice(8,-1)}function D(t){switch(t){case'"':return'\\"';case"<":return"\\u003C";case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return t<" "?`\\u${t.charCodeAt(0).toString(16).padStart(4,"0")}`:""}}function f(t){let o="",c=0;const i=t.length;for(let a=0;a<i;a+=1){const s=t[a],b=D(s);b&&(o+=t.slice(c,a)+b,c=a+1)}return`"${c===0?t:o+t.slice(c)}"`}function C(t,o){const c=[],i=new Map,a=[];for(const e in o)a.push({key:e,fn:o[e]});const s=[];let b=0;function u(e){if(typeof e=="function")throw new O("Cannot stringify a function",s);if(i.has(e))return i.get(e);if(e===void 0)return S;if(Number.isNaN(e))return m;if(e===1/0)return _;if(e===-1/0)return d;if(e===0&&1/e<0)return k;const p=b++;i.set(e,p);for(const{key:j,fn:$}of a){const l=$(e);if(l)return c[p]=`["${j}",${u(l)}]`,p}let r="";if(E(e))r=I(e);else switch(x(e)){case"Number":case"String":case"Boolean":r=`["Object",${I(e)}]`;break;case"BigInt":r=`["BigInt",${e}]`;break;case"Date":r=`["Date","${e.toISOString()}"]`;break;case"RegExp":const{source:$,flags:l}=e;r=l?`["RegExp",${f($)},"${l}"]`:`["RegExp",${f($)}]`;break;case"Array":r="[";for(let n=0;n<e.length;n+=1)n>0&&(r+=","),n in e?(s.push(`[${n}]`),r+=u(e[n]),s.pop()):r+=w;r+="]";break;case"Set":r='["Set"';for(const n of e)r+=`,${u(n)}`;r+="]";break;case"Map":r='["Map"';for(const[n,y]of e)s.push(`.get(${E(n)?I(n):"..."})`),r+=`,${u(n)},${u(y)}`;r+="]";break;default:if(!v(e))throw new O("Cannot stringify arbitrary non-POJOs",s);if(Object.getOwnPropertySymbols(e).length>0)throw new O("Cannot stringify POJOs with symbolic keys",s);if(Object.getPrototypeOf(e)===null){r='["null"';for(const n in e)s.push(`.${n}`),r+=`,${f(n)},${u(e[n])}`,s.pop();r+="]"}else{r="{";let n=!1;for(const y in e)n&&(r+=","),n=!0,s.push(`.${y}`),r+=`${f(y)}:${u(e[y])}`,s.pop();r+="}"}}return c[p]=r,p}const N=u(t);return N<0?`${N}`:`[${c.join(",")}]`}function I(t){const o=typeof t;return o==="string"?f(t):t instanceof String?f(t.toString()):t===void 0?S.toString():t===0&&1/t<0?k.toString():o==="bigint"?`["BigInt","${t}"]`:String(t)}export{C as s};
